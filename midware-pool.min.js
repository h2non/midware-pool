/*! midware-pool v0.1.1 - MIT license - https://github.com/h2non/midware-pool */
(function(t){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=t()}else if(typeof define==="function"&&define.amd){define([],t)}else{var e;if(typeof window!=="undefined"){e=window}else if(typeof global!=="undefined"){e=global}else if(typeof self!=="undefined"){e=self}else{e=this}e.midwarePool=t()}})(function(){var t,e,n;return function r(t,e,n){function o(f,u){if(!e[f]){if(!t[f]){var l=typeof require=="function"&&require;if(!u&&l)return l(f,!0);if(i)return i(f,!0);var p=new Error("Cannot find module '"+f+"'");throw p.code="MODULE_NOT_FOUND",p}var s=e[f]={exports:{}};t[f][0].call(s.exports,function(e){var n=t[f][1][e];return o(n?n:e)},s,s.exports,r,t,e,n)}return e[f].exports}var i=typeof require=="function"&&require;for(var f=0;f<n.length;f++)o(n[f]);return o}({1:[function(t,e,n){var r=t("midware");e.exports=o;function o(t){this.ctx=null;this.pool=Object.create(null);if(t)this.useParent(t)}o.prototype.registered=function(t){return typeof this.pool[t]==="function"};o.prototype.flush=function(t){if(this.registered(t)){this.pool[t].stack.splice(0)}};o.prototype.flushAll=function(){this.pool=Object.create(null)};o.prototype.remove=function(t,e){if(this.registered(t)){this.pool[t].remove(e)}};o.prototype.stack=function(t){if(this.registered(t)){return this.pool[t].stack}};o.prototype.useCtx=function(t){this.ctx=t};o.prototype.useParent=function(t){if(!(t instanceof o))throw new TypeError("Invalid parent middleware");this.parent=t};o.prototype.use=function(t,e){var n=this.pool[t];var o=i(arguments,1);if(!n){n=this.pool[t]=r(this.ctx)}if(Array.isArray(e)){o=e}n.apply(null,o)};o.prototype.runParent=function(t,e){if(!this.parent)return e();this.parent.run.apply(this.parent,t.concat(e))};o.prototype.run=function(t){var e=this.pool;var n=i(arguments);var r=n.pop();this.runParent(n,o);function o(o,i){if(o||i)return r(o,i);var f=e[t];if(!f)return r();f.run.apply(null,n.slice(1).concat(r))}};function i(t,e){return[].slice.call(t,e||0)}},{midware:2}],2:[function(e,n,r){(function(e,o){if(typeof t==="function"&&t.amd){t(["exports"],o)}else if(typeof r==="object"){o(r);if(typeof n==="object"&&n!==null){n.exports=r=r.midware}}else{o(e)}})(this,function(t){"use strict";function e(t){var e=r.stack=[];t=t||null;function r(){n(arguments).filter(function(t){return typeof t==="function"}).forEach(function(t){e.push(t)});return t}r.run=function o(){var r,o=n(arguments);if(typeof o[o.length-1]==="function"){r=o.pop()}if(!e.length){if(r)r.call(t);return}var i=e.slice();o.push(u);function f(){var e=i.shift();e.apply(t,o)}function u(e,n){if(e||n||!i.length){i=null;if(r)r.call(t,e,n)}else{f()}}f()};r.remove=function(t){for(var n=0,r=e.length;n<r;n+=1){var o=e[n];if(o===t||o.name===t){e.splice(n,1);break}}};r.flush=function(){e.splice(0)};return r}function n(t){var e=new Array(t.length);for(var n=0,r=e.length;n<r;n+=1){e[n]=t[n]}return e}e.VERSION="0.1.7";t.midware=e})},{}]},{},[1])(1)});
//# sourceMappingURL=http://cdn.rawgit.com/h2non/midware-pool/0.1.1/midware-pool.min.js.map
